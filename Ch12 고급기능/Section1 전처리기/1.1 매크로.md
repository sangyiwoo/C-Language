## 1. 매크로 상수
매크로 상수를 정의하면 전처리기는 소스 파일에서 해당 단어가 사용된 것을 모두 찾아 대치(replace)한다.

상수 값 뿐만 아니라 함수명이나 데이터형도 매크로 상수를 사용해서 정의할 수 있다.

### 형식
```c
#define 매크로명 값
```
> 기호 상수: 매크로 상수처럼 이름을 갖는 상수
> > 기호 상수를 사용하면 프로그램이 이해라기 쉬워지고, 수정하기도 쉬워진다.
>   
> >따라서 리터럴 상수를 사용하는 것보다 매크로 상수를 정의하고 사용하는 것이 좋다.

---

## 2. 매크로 함수
매크로 함수는 함수처럼 인자를 갖는 매크로인다.

실제로는 함수가 아니라 매크로 상수처럼 매크로 함수가 사용되는 곳에 문자열 대치를 통해서 코드를 확장한다.

### 형식
```c
#define 매크로함수명(인자1, 인자2 ...) 대치할 내용
```

매크로 함수는 함수인 것처럼 보이지만 사실 함수가 아님.

따라서 컴파일시에 인자의 데이터형 검사를 수행하지 않으며, 인자를 매개변수로 전달하는 함수 호출 과정이 수행되지 않는다.

---

#### 매크로 함수를 정의할 때는 연산자 우선순위를 유의하여 인자를 사용할 때 `()`로 묶어주어야한다.
```c
//매크로 함수
#define SQUARE( n ) n * n

resutlt = SQUARE(1+2); //1+2*1+2
```

```c
//일반 함수
int square(int n)
{
    return n * n;
}

result = SQUARE(1+2); //(1+2)*(1+2)
```

---
#### 매크로 함수의 인자로 증감연산자를 이용한 연산식을 사용하지 않도록 주의해야한다.
```c
int n = 3;
result = SQUARE(++n); //n을 증가시킨 다음 SQUARE(4)를 호출하는 것이 아니라 ((++n)*(++n))으로 대치가 되어 n이 두 번 증가가 된다.
```

---

#### 매크로 함수는 일반 함수와 다르게 인자의 데이터 형의 검사하지 않는다.
```c
SQUARE(2.5); //((2.5)*(2.5))로 문자열 대치가되므로 6.25가 된다.
square(2.5); //2.5가 int형으로 반환되어 square(2)로 처리되므로 4가 된다
```

---

#### 여러 줄로 된 매크로 함수를 정의하려면 각 라인의 맨 끝에 \를 써주어야 한다.
> 코드의 맨끝에 `\`를 쓰면 다음 줄의 코드를 현재 줄의 끝에 연결해준다.
```c
#define TEST(x) if(x<0)\
                    printf("음수입니다");\
                else if(x>0)\
                    printf("양수입니다");\
                else
                    printf("0입니다");
```

---

### 매크로 함수의 장단점
#### 장점
- 매크로 함수를 사용하면 프로그램의 실행 속도가 빨라진다.
  > 함수 호출이 일어나지 않아므로 함수 호출의 오버헤드를 줄일 수 있기 때문

#### 단점
- 매크로 함수를 많이 사용하는 프로그램은 프로그램의 크기가 커진다.
  > 일반 하수는 필요할 때마다 반복해서 호출하지만 매크로 함수는 확장한 코드가 복사가 되기 때문
- 매크로 함수를 사용하면, 코드가 알아보기 어려워진다. 

---
---
## 3. 전처리기 연산자
- ###  # 연산자(문자열 만들기 연산자(stringizing sperator))
`#` 다음에 오는 이름을 `""`기호로 감싸서 문자열 리터럴로 만들어 준다.
```c
//#연산자를 사용하지 않고 정의된 매크로 함수 PRINT1
#define PRINT1(x) printf("x = %d\n", x)
int num = 10;
PRRINT1(num);//printf("x = %d\n", x);로 문자열 대치된다.
```

```c
#define PRINT2(x) printf(#x" = %d\n", x);
int num = 10;
PRINT2(num);//printf("num""=%d\n", num);으로 문자열 대치된다.
//C에서는 하나 이상의 문자열 리터럴을 연속적으로 사용하면 하나로 합치기 때문에, printf("num=%d\n", num);으로 처리된다.
```

- ### ## 연산자(토큰 결합 연산자(token-pasting operator))
매크로 함수 안에서 토큰에 다른 토큰을 결합해서 새로운 토큰을 생성하는 역할을 한다.
> 토큰: C프로그램의 최소 단위가 되는 식별자나 키워드 등을 말한다.

```c
#define MAKE_FUNC(name) void fn##name(viod)\
                        {
                            printf("fn" #name " 호출\n");\
                        }

MAKE_FUNC(test1)

void fntest1(void)
{
    printf("fn" "test1" " 호출\n");
}
```
\## 연산자는 MAKE_FUNC 매크로 함수의 인자로 주어진 name을 fn 다음에 연결해서 새로운 토큰을 만들어준다.
